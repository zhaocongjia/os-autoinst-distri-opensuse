<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lib/bootloader_pvm.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='./style.css' />
</head>

<body>



<ul id="index"><li><a href="./index.html"><i>&lt;= Back to file list</i></a></li>
  <li><a href="#bootloader_pvm">bootloader_pvm</a>
    <ul>
      <li><a href="#get_into_net_boot">get_into_net_boot</a></li>
      <li><a href="#reset_lpar_netboot">reset_lpar_netboot</a></li>
      <li><a href="#enter_netboot_parameters">enter_netboot_parameters</a></li>
      <li><a href="#prepare_pvm_installation">prepare_pvm_installation</a></li>
      <li><a href="#boot_pvm">boot_pvm</a></li>
      <li><a href="#check_lpar_is_down">check_lpar_is_down</a></li>
      <li><a href="#boot_hmc_pvm">boot_hmc_pvm</a></li>
      <li><a href="#boot_spvm">boot_spvm</a></li>
    </ul>
  </li>
</ul><h1>lib/bootloader_pvm.pm</h1>

<h1 id="bootloader_pvm">bootloader_pvm</h1>

<p>Library for spvm and pvm_hmc backend to boot and install SLES</p>

<h2 id="get_into_net_boot">get_into_net_boot</h2>

<pre><code>get_into_net_boot();</code></pre>

<p>Get into SMS menu for booting from net.</p>

<h2 id="reset_lpar_netboot">reset_lpar_netboot</h2>

<pre><code>reset_lpar_netboot();</code></pre>

<p>Reset LPAR manually and attempt a second network boot when the first boot attempt failed in cases when the LPAR was reconfigured during the boot process or when it fails to load the linux kernel or initrd.</p>

<h2 id="enter_netboot_parameters">enter_netboot_parameters</h2>

<pre><code>enter_netboot_parameters();</code></pre>

<p>Type kernel and ramdisk parameters in grub command line.</p>

<h2 id="prepare_pvm_installation">prepare_pvm_installation</h2>

<pre><code>prepare_pvm_installation();</code></pre>

<p>Handle the boot and installation preparation process of PVM LPARs after the hypervisor specific actions to power them on is done</p>

<h2 id="boot_pvm">boot_pvm</h2>

<pre><code>boot_pvm();</code></pre>

<p>Decide whether job is booting a pvm_hmc backend system or a spvm via Novalink one and call the appropriate booting function.</p>

<h2 id="check_lpar_is_down">check_lpar_is_down</h2>

<pre><code>check_lpar_is_down($hmc_machine_name, $lpar_id);</code></pre>

<p>Check if an LPAR identified by <code>$lpar_id</code> in the Power machine <code>$hmc_machine_name</code> is down, by querying with the <code>lssyscfg</code> command. Command will check 24 times in a loop while waiting 5 seconds between each run, and exit as soon as the LPAR is down. Check is performed by a needle match looking for the <b>LPAR IS DOWN</b> text which is printed by the check script on success.</p>

<h2 id="boot_hmc_pvm">boot_hmc_pvm</h2>

<pre><code>boot_hmc_pvm();</code></pre>

<p>Boot a system connected via the hmc_pvm backend. This function will connect to the HMC command line, issue the commands necessary to start a given LPAR (from the setting <b>LPAR_ID</b>), by first making sure the LPAR is down, before booting it into the System Management Services menu, and then opening a virtual terminal to the LPAR console to navigate the SMS to either boot the LPAR from network (for installations) or from the local disk.</p>

<h2 id="boot_spvm">boot_spvm</h2>

<pre><code>boot_spvm();</code></pre>

<p>Boot from spvm backend via novalink and switch to installation console (ssh or vnc).</p>


</body>

</html>


